scalar DateTime

# Enums from Prisma
enum MemberRank {
  PROFESSOR
  PhD
  POSTDOC
  MSc
  BSc
  Mr
  Mrs
}

enum MemberStatus {
  ACTIVE
  ALUMNI
  INACTIVE
}

enum MemberRole {
  PI
  STUDENT
  LAB_MANAGER
  RESEARCHER
  ADVISOR
  INTERN
  CONTRACTOR
  GUEST
  ALUMNI
  OTHER
}

enum EquipmentStatus {
  AVAILABLE
  IN_USE
  MAINTENANCE
}

# Types mapped from Prisma models
type AcademicInfo {
  id: ID!
  degree: String!
  field: String
  institution: String
  graduationYear: Int
  memberId: String!
  member: Member!
  createdAt: DateTime!
  updatedAt: DateTime!
}

type Member {
  id: ID!
  name: String!
  rank: MemberRank
  status: MemberStatus
  role: MemberRole
  scholarship: Int
  photoUrl: String
  joinedDate: DateTime
  academicInfo: [AcademicInfo!]!
  equipments: [Equipment!]!
  bookings: [Booking!]!
  projects: [Project!]!
  publications: [Publication!]!
  events: [Event!]!
  documents: [Document!]!
  protocols: [Protocol!]!
  noteTasks: [NoteTask!]!
  user: User
  createdAt: DateTime!
  updatedAt: DateTime!
}

type Project {
  id: ID!
  title: String!
  description: String
  startDate: DateTime
  endDate: DateTime
  equipments: [Equipment!]!
  bookings: [Booking!]!
  members: [Member!]!
  grants: [Grant!]!
  publications: [Publication!]!
  collaborators: [Collaborator!]!
  documents: [Document!]!
  protocols: [Protocol!]!
  events: [Event!]!
  expenses: [Expense!]!
  noteTasks: [NoteTask!]!
  createdAt: DateTime!
  updatedAt: DateTime!
  # Computed field
  totalInvestment: Float!  # Sum of all expenses
}

type Equipment {
  id: ID!
  name: String!
  description: String
  serialNumber: String
  status: EquipmentStatus!
  projectId: String
  project: Project
  memberId: String
  member: Member
  bookings: [Booking!]!
  events: [Event!]!
  noteTasks: [NoteTask!]!
  createdAt: DateTime!
  updatedAt: DateTime!
}

type Booking {
  id: ID!
  startTime: DateTime!
  endTime: DateTime!
  purpose: String
  equipmentId: String!
  equipment: Equipment!
  memberId: String!
  member: Member!
  projectId: String
  project: Project
  eventId: String
  event: Event
  createdAt: DateTime!
  updatedAt: DateTime!
}

type Event {
  id: ID!
  title: String!
  description: String
  date: DateTime!
  location: String
  attendees: [Member!]!
  projects: [Project!]!
  tasks: [NoteTask!]!
  expenses: [Expense!]!
  equipments: [Equipment!]!
  bookings: [Booking!]!
  createdAt: DateTime!
  updatedAt: DateTime!
}

type Grant {
  id: ID!
  name: String!
  budget: Float!
  deadline: DateTime!
  projects: [Project!]!
  expenses: [Expense!]!
  noteTasks: [NoteTask!]!
  createdAt: DateTime!
  # Computed fields
  totalSpent: Float!  # Sum of all expenses
  remainingBudget: Float!  # budget - totalSpent
}

type Publication {
  id: ID!
  title: String!
  published: DateTime
  doi: String
  url: String
  members: [Member!]!
  projects: [Project!]!
  noteTasks: [NoteTask!]!
  createdAt: DateTime!
  updatedAt: DateTime!
}

type Collaborator {
  id: ID!
  name: String!
  organization: String
  projects: [Project!]!
  noteTasks: [NoteTask!]!
  createdAt: DateTime!
  updatedAt: DateTime!
}

type Document {
  id: ID!
  filename: String!
  url: String!
  projectId: String
  project: Project
  memberId: String
  member: Member
  protocol: Protocol
  noteTasks: [NoteTask!]!
  createdAt: DateTime!
  updatedAt: DateTime!
}

type Protocol {
  id: ID!
  title: String!
  description: String
  category: ProtocolCategory!
  version: String!
  estimatedTime: String
  difficulty: ProtocolDifficulty!
  tags: String
  downloads: Int!
  authorId: String
  author: Member
  projectId: String
  project: Project
  documentId: String
  document: Document
  materials: String
  equipment: String
  steps: String
  safetyNotes: String
  versionHistory: String
  noteTasks: [NoteTask!]!
  createdAt: DateTime!
  updatedAt: DateTime!
}

enum ProtocolCategory {
  WET_LAB
  COMPUTATIONAL
  SAFETY
  GENERAL
}

enum ProtocolDifficulty {
  BEGINNER
  INTERMEDIATE
  ADVANCED
}

type Expense {
  id: ID!
  description: String!
  amount: Float!
  date: DateTime!
  projectId: String
  project: Project
  grantId: String
  grant: Grant
  eventId: String
  event: Event
  noteTasks: [NoteTask!]!
}

type NoteTask {
  id: ID!
  title: String
  content: String!
  completed: Boolean!
  dueDate: DateTime
  memberId: String
  member: Member
  projectId: String
  project: Project
  grantId: String
  grant: Grant
  eventId: String
  event: Event
  publicationId: String
  publication: Publication
  documentId: String
  document: Document
  equipmentId: String
  equipment: Equipment
  collaboratorId: String
  collaborator: Collaborator
  expenseId: String
  expense: Expense
  protocolId: String
  protocol: Protocol
  createdAt: DateTime!
  updatedAt: DateTime!
}

type User {
  id: ID!
  name: String!
  email: String!
  emailVerified: DateTime
  image: String
  memberId: String
  member: Member
  createdAt: DateTime!
  updatedAt: DateTime!
}

# Input types for mutations
input CreateMemberInput {
  name: String!
  rank: MemberRank
  status: MemberStatus
  role: MemberRole
  scholarship: Int
  photoUrl: String
  joinedDate: DateTime
}

input UpdateMemberInput {
  name: String
  rank: MemberRank
  status: MemberStatus
  role: MemberRole
  scholarship: Int
  photoUrl: String
  joinedDate: DateTime
}

input CreateProjectInput {
  title: String!
  description: String
  startDate: DateTime
  endDate: DateTime
}

input UpdateProjectInput {
  title: String
  description: String
  startDate: DateTime
  endDate: DateTime
}

input CreateEquipmentInput {
  name: String!
  description: String
  serialNumber: String
  status: EquipmentStatus
  projectId: String
  memberId: String
}

input UpdateEquipmentInput {
  name: String
  description: String
  serialNumber: String
  status: EquipmentStatus
  projectId: String
  memberId: String
}

input CreateBookingInput {
  startTime: DateTime!
  endTime: DateTime!
  purpose: String
  equipmentId: String!
  memberId: String!
  projectId: String
  eventId: String
}

input UpdateBookingInput {
  startTime: DateTime
  endTime: DateTime
  purpose: String
  equipmentId: String
  memberId: String
  projectId: String
  eventId: String
}

input CreateEventInput {
  title: String!
  description: String
  date: DateTime!
  location: String
}

input UpdateEventInput {
  title: String
  description: String
  date: DateTime
  location: String
}

input CreateGrantInput {
  name: String!
  budget: Float!
  deadline: DateTime!
}

input UpdateGrantInput {
  name: String
  budget: Float
  deadline: DateTime
}

input CreatePublicationInput {
  title: String!
  published: DateTime
  doi: String
  url: String
}

input UpdatePublicationInput {
  title: String
  published: DateTime
  doi: String
  url: String
}

input CreateCollaboratorInput {
  name: String!
  organization: String
}

input UpdateCollaboratorInput {
  name: String
  organization: String
}

input CreateDocumentInput {
  filename: String!
  url: String!
  projectId: String
  memberId: String
}

input UpdateDocumentInput {
  filename: String
  url: String
  projectId: String
  memberId: String
}

input CreateProtocolInput {
  title: String!
  description: String
  category: ProtocolCategory
  version: String
  estimatedTime: String
  difficulty: ProtocolDifficulty
  tags: String
  authorId: String
  projectId: String
  documentId: String
  materials: String
  equipment: String
  steps: String
  safetyNotes: String
  versionHistory: String
}

input UpdateProtocolInput {
  title: String
  description: String
  category: ProtocolCategory
  version: String
  estimatedTime: String
  difficulty: ProtocolDifficulty
  tags: String
  authorId: String
  projectId: String
  documentId: String
  materials: String
  equipment: String
  steps: String
  safetyNotes: String
  versionHistory: String
}

input CreateExpenseInput {
  description: String!
  amount: Float!
  date: DateTime
  projectId: String
  grantId: String
  eventId: String
}

input UpdateExpenseInput {
  description: String
  amount: Float
  date: DateTime
  projectId: String
  grantId: String
  eventId: String
}

input CreateNoteTaskInput {
  title: String
  content: String!
  completed: Boolean
  dueDate: DateTime
  memberId: String
  projectId: String
  grantId: String
  eventId: String
  publicationId: String
  documentId: String
  equipmentId: String
  collaboratorId: String
  expenseId: String
  protocolId: String
}

input UpdateNoteTaskInput {
  title: String
  content: String
  completed: Boolean
  dueDate: DateTime
  memberId: String
  projectId: String
  grantId: String
  eventId: String
  publicationId: String
  documentId: String
  equipmentId: String
  collaboratorId: String
  expenseId: String
  protocolId: String
}

input CreateAcademicInfoInput {
  degree: String!
  field: String
  institution: String
  graduationYear: Int
  memberId: String!
}

input UpdateAcademicInfoInput {
  degree: String
  field: String
  institution: String
  graduationYear: Int
}

input UpdateUserInput {
  name: String
  image: String
}

# Query type
type Query {
  # Member queries
  members: [Member!]!
  member(id: ID!): Member
  
  # Project queries
  projects: [Project!]!
  project(id: ID!): Project
  
  # Equipment queries
  equipments: [Equipment!]!
  equipment(id: ID!): Equipment
  
  # Booking queries
  bookings: [Booking!]!
  booking(id: ID!): Booking
  
  # Event queries
  events: [Event!]!
  event(id: ID!): Event
  
  # Grant queries
  grants: [Grant!]!
  grant(id: ID!): Grant
  
  # Publication queries
  publications: [Publication!]!
  publication(id: ID!): Publication
  
  # Collaborator queries
  collaborators: [Collaborator!]!
  collaborator(id: ID!): Collaborator
  
  # Document queries
  documents: [Document!]!
  document(id: ID!): Document
  
  # Protocol queries
  protocols: [Protocol!]!
  protocol(id: ID!): Protocol
  
  # Expense queries
  expenses: [Expense!]!
  expense(id: ID!): Expense
  
  # NoteTask queries
  noteTasks: [NoteTask!]!
  noteTask(id: ID!): NoteTask
  
  # AcademicInfo queries
  academicInfos: [AcademicInfo!]!
  academicInfo(id: ID!): AcademicInfo
  
  # User queries
  users: [User!]!
  user(id: ID!): User
  currentUser: User
}

# Mutation type
type Mutation {
  # Member mutations
  createMember(input: CreateMemberInput!): Member!
  updateMember(id: ID!, input: UpdateMemberInput!): Member!
  deleteMember(id: ID!): Boolean!
  
  # Project mutations
  createProject(input: CreateProjectInput!): Project!
  updateProject(id: ID!, input: UpdateProjectInput!): Project!
  deleteProject(id: ID!): Boolean!
  
  # Equipment mutations
  createEquipment(input: CreateEquipmentInput!): Equipment!
  updateEquipment(id: ID!, input: UpdateEquipmentInput!): Equipment!
  deleteEquipment(id: ID!): Boolean!
  
  # Booking mutations
  createBooking(input: CreateBookingInput!): Booking!
  updateBooking(id: ID!, input: UpdateBookingInput!): Booking!
  deleteBooking(id: ID!): Boolean!
  
  # Event mutations
  createEvent(input: CreateEventInput!): Event!
  updateEvent(id: ID!, input: UpdateEventInput!): Event!
  deleteEvent(id: ID!): Boolean!
  
  # Grant mutations
  createGrant(input: CreateGrantInput!): Grant!
  updateGrant(id: ID!, input: UpdateGrantInput!): Grant!
  deleteGrant(id: ID!): Boolean!
  
  # Publication mutations
  createPublication(input: CreatePublicationInput!): Publication!
  updatePublication(id: ID!, input: UpdatePublicationInput!): Publication!
  deletePublication(id: ID!): Boolean!
  
  # Collaborator mutations
  createCollaborator(input: CreateCollaboratorInput!): Collaborator!
  updateCollaborator(id: ID!, input: UpdateCollaboratorInput!): Collaborator!
  deleteCollaborator(id: ID!): Boolean!
  
  # Document mutations
  createDocument(input: CreateDocumentInput!): Document!
  updateDocument(id: ID!, input: UpdateDocumentInput!): Document!
  deleteDocument(id: ID!): Boolean!
  
  # Protocol mutations
  createProtocol(input: CreateProtocolInput!): Protocol!
  updateProtocol(id: ID!, input: UpdateProtocolInput!): Protocol!
  deleteProtocol(id: ID!): Boolean!
  
  # Expense mutations
  createExpense(input: CreateExpenseInput!): Expense!
  updateExpense(id: ID!, input: UpdateExpenseInput!): Expense!
  deleteExpense(id: ID!): Boolean!
  
  # NoteTask mutations
  createNoteTask(input: CreateNoteTaskInput!): NoteTask!
  updateNoteTask(id: ID!, input: UpdateNoteTaskInput!): NoteTask!
  deleteNoteTask(id: ID!): Boolean!
  
  # AcademicInfo mutations
  createAcademicInfo(input: CreateAcademicInfoInput!): AcademicInfo!
  updateAcademicInfo(id: ID!, input: UpdateAcademicInfoInput!): AcademicInfo!
  deleteAcademicInfo(id: ID!): Boolean!
  
  # User mutations
  # Note: createUser and deleteUser are handled by NextAuth
  # Only allow updating profile information
  updateUser(id: ID!, input: UpdateUserInput!): User!
  
  # Equipment assignment mutations (convenience methods)
  assignEquipmentToMember(equipmentId: ID!, memberId: ID!): Equipment!
  unassignEquipmentFromMember(equipmentId: ID!): Equipment!
  
  # Project-Member relationship mutations (M:N convenience methods)
  addMemberToProject(memberId: ID!, projectId: ID!): Project!
  removeMemberFromProject(memberId: ID!, projectId: ID!): Project!
  
  # Publication-Member relationship mutations (M:N)
  addMemberToPublication(memberId: ID!, publicationId: ID!): Publication!
  removeMemberFromPublication(memberId: ID!, publicationId: ID!): Publication!
  
  # Publication-Project relationship mutations (M:N)
  addProjectToPublication(projectId: ID!, publicationId: ID!): Publication!
  removeProjectFromPublication(projectId: ID!, publicationId: ID!): Publication!
  
  # Event-Member relationship mutations (M:N)
  addMemberToEvent(memberId: ID!, eventId: ID!): Event!
  removeMemberFromEvent(memberId: ID!, eventId: ID!): Event!
  
  # Event-Project relationship mutations (M:N)
  addProjectToEvent(projectId: ID!, eventId: ID!): Event!
  removeProjectFromEvent(projectId: ID!, eventId: ID!): Event!
  
  # Grant-Project relationship mutations (M:N)
  addProjectToGrant(projectId: ID!, grantId: ID!): Grant!
  removeProjectFromGrant(projectId: ID!, grantId: ID!): Grant!
  
  # Collaborator-Project relationship mutations (M:N)
  addCollaboratorToProject(collaboratorId: ID!, projectId: ID!): Project!
  removeCollaboratorFromProject(collaboratorId: ID!, projectId: ID!): Project!
  
  # Event-Equipment relationship mutations (M:N)
  addEquipmentToEvent(equipmentId: ID!, eventId: ID!): Event!
  removeEquipmentFromEvent(equipmentId: ID!, eventId: ID!): Event!
}

